Table: Table 28

												
		Year Ended December 31,	
		2022			2021			2020	
Cash Flows from Operating Activities									
Net income		$	12,587			$	5,644			$	862	
Adjustments to reconcile net income to net cash provided by operating activities:									
Depreciation, amortization and impairment			3,747				2,911				2,322	
Stock-based compensation			1,560				2,121				1,734	
Inventory and purchase commitments write-downs			177				140				202	
Foreign currency transaction net unrealized loss (gain)			81				(55	)			114	
Non-cash interest and other operating activities			340				245				525	
Digital assets loss (gain), net			140				(27	)			—	
Changes in operating assets and liabilities:									
Accounts receivable			(1,124	)			(130	)			(652	)
Inventory			(6,465	)			(1,709	)			(422	)
Operating lease vehicles			(1,570	)			(2,114	)			(1,072	)
Prepaid expenses and other current assets			(1,417	)			(271	)			(251	)
Other non-current assets			(2,551	)			(1,291	)			(344	)
Accounts payable and accrued liabilities			6,029				4,578				2,102	
Deferred revenue			1,131				793				321	
Customer deposits			155				186				7	
Other long-term liabilities			1,904				476				495	
Net cash provided by operating activities			14,724				11,497				5,943	
Cash Flows from Investing Activities									
Purchases of property and equipment excluding finance leases, net of sales			(7,158	)			(6,482	)			(3,157	)
Purchases of solar energy systems, net of sales			(5	)			(32	)			(75	)
Purchases of digital assets			—				(1,500	)			—	
Proceeds from sales of digital assets			936				272				—	
Purchase of intangible assets			(9	)			—				(10	)
Purchases of investments			(5,835	)			(132	)			—	
Proceeds from maturities of investments			22				—				—	
Receipt of government grants			76				6				123	
Business combinations, net of cash acquired			—				—				(13	)
Net cash used in investing activities			(11,973	)			(7,868	)			(3,132	)
Cash Flows from Financing Activities									
Proceeds from issuances of common stock in public offerings, net of issuance costs			—				—				12,269	
Proceeds from issuances of debt			—				8,883				9,713	
Repayments of convertible and other debt			(3,364	)			(14,167	)			(11,623	)
Collateralized lease repayments			—				(9	)			(240	)
Proceeds from exercises of stock options and other stock issuances			541				707				417	
Principal payments on finance leases			(502	)			(439	)			(338	)
Debt issuance costs			—				(9	)			(6	)
Proceeds from investments by noncontrolling interests in subsidiaries			—				2				24	
Distributions paid to noncontrolling interests in subsidiaries			(157	)			(161	)			(208	)
Payments for buy-outs of noncontrolling interests in subsidiaries			(45	)			(10	)			(35	)
Net cash (used in) provided by financing activities			(3,527	)			(5,203	)			9,973	
Effect of exchange rate changes on cash and cash equivalents and restricted cash			(444	)			(183	)			334	
Net (decrease) increase in cash and cash equivalents and restricted cash			(1,220	)			(1,757	)			13,118	
Cash and cash equivalents and restricted cash, beginning of period			18,144				19,901				6,783	
Cash and cash equivalents and restricted cash, end of period		$	16,924			$	18,144			$	19,901	
Supplemental Non-Cash Investing and Financing Activities									
Acquisitions of property and equipment included in liabilities		$	2,148			$	2,251			$	1,088	
Supplemental Disclosures									
Cash paid during the period for interest, net of amounts capitalized		$	152			$	266			$	444	
Cash paid during the period for taxes, net of refunds		$	1,203			$	561			$	115	